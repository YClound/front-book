<!doctype html>
<!--[if lte IE 8]>
<html class="no-js lt-ie9" lang=""> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="zh-CN"> <!--<![endif]-->
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="format-detection" content="email=no"/>
    <meta name="format-detection" content="address=no"/>
    <meta name="format-detection" content="telephone=no"/>
    <meta http-equiv="Cache-Control" content="no-siteapp"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-title" content="雏鹰网"/>
    <title>表单测试</title>
    <!-- Tell the browser to be responsive to screen width -->
    <meta content="width=device-width, initial-scale=1, minimum-scale=1.0, maximum-scale=1, user-scalable=no" name="viewport">
    <meta name="keywords" content="众筹,雏鹰网,雏鹰众筹,基金,种子基金,股权众筹,天使轮,种子轮,天使投资,风险投资,众筹平台,创业融资,私募股权融资,私募股权投资平台,融资平台">
    <meta name="description" content="雏鹰网是致力于帮助有梦想、有决心、有能力、够努力的早期创业者获得股权投资的互联网平台。打造融合众筹投资人和创业者学习、互助、交流的在线众创空间。梦想再小也要呵护，力量再小也要支持。">
    <!-- apple icon -->
    <link type="image/png" href="/static/img/apple-touch-icon.png" rel="apple-touch-icon">
 
    <link rel="stylesheet" href="../assets/css/mobile/base.css">
    
    <script src="../assets/vendor/jquery/jquery-2.1.4.min.js"></script>
    <!-- 验证插件 -->
    <script>
      var dm = {};
    </script>
    

    
    <style>
    body {
      padding: 50px;
    }
    .form-content {
      position: relative;
      margin-bottom: 15px;
    }

    .survey-item {
      position: relative;
      margin-bottom: 20px;
    }
    .error {
      border:1px solid red;
    }
    </style>
    
  </head>
  <body class="">
    <section>
      <pre>
          基于jQuery依赖两个js
          ../assets/js/plugins/dm.ajaxpost.js
          ../assets/js/plugins/dm.validate2.js"
        
      </pre>
        
    </section>
    <div class="wrapper">
      <h2>同步提交表单</h2>
      
      <form action="" class="form form-login validate-form"  id="nativeForm" method="post">

        <div class="form-inner">
          <div class="form-content">
              <div class="form-control">
                <input type="text" required class="form-input" placeholder="姓名" name="username" data-bubble-dir="down">  
              </div>
          </div>
          <div>
            <p>异步验证 data-ajax="/static/assets/data/phone.json" </p>
            <p>正确返回json {"status":0,"info":""}，错误 {"status":0,"info":"手机号码已存在"}</p>
          </div>
          <!-- 异步验证 -->
          <div class="form-content">
              <div class="form-control">
                <input type="tel" required data-rule="cellphone" class="form-input" placeholder="手机号码" data-cellphone-msg="你的手机号码有点疯狂" name="cellphone" id="p2" data-ajax="/static/assets/data/phone.json">  
              </div>
          </div>

          <div class="form-content">
              <div class="form-control">
                <input type="text"  required data-rule="password" class="form-input" placeholder="密码（6~16 位，字母区分大小写）"  name="password" >  
              </div>
          </div>
          <div class="form-content">
              <div class="form-control">
                <input type="text" required data-rule="idcard" class="form-input" placeholder="身份证号码"  name="idcard" >  
              </div>
          </div>

          <div class="form-content">
              <div class="form-control">
                <textarea name="note" id="" cols="30" rows="5" maxlength="10"></textarea>
                
              </div>
          </div>

          <div class="form-control submit">
            <button type="submit" class="full btn btn-primary btn-submit" >提交</button>
          </div>

          
          

        </div>

      </form>
    </div>

    <div class="wrapper">
      <h2>异步提交表单</h2>
      <!-- data-ajax-method 提交方式 get or post 默认post -->
      <form action="/static/assets/data/form.json" class="form"  id="ajaxForm" method="post" data-ajax-method="get">

        <div class="form-inner">
          <div class="form-content">
              <div class="form-control">
                <input type="text" required class="form-input" placeholder="姓名" name="username" >  
              </div>
          </div>
          


          <div class="form-control submit">
            <button type="submit" class="full btn btn-primary btn-submit" >提交</button>
          </div>

          
          

        </div>

      </form>
    </div>


    <div class=" wrapper qui-page">
            <h3 class="survey-info">问卷调查</h3>
            <form action="" method="post" id="sForm">
                
                <div class="survey-list">
                    <div class="survey-item" >
                        <div class="wrap" data-rule="radio" data-name="a" data-radio-msg="必须要选一个啊" id="xx">
                          <div class="survey-header" >
                              <span class="survey-index">1、</span>
                              <span class="survey-title">验证有误会给容器添加error这个class ,同级下会出现错误信息, 所以要保证父级 position:relative</span>
                          </div>
                          <div class="survey-content" >
                              <label for="s1_1" class="survey-label" >
                                  <input type="radio" class="regular-radio" id="s1_1" name="a" >
                                  <label class="" for="s1_1">
                                      
                                  </label>
                                  <span class="regular-icon-txt">2000-3000</span>
                              </label>
                              <label for="s1_2" class="survey-label">
                                  <input type="radio" class="regular-radio" id="s1_2" name="a" >
                                  <label class="" for="s1_2">
                                      
                                  </label>
                                  <span class="regular-icon-txt">3000-4000</span>
                              </label>
                              <label for="s1_3" class="survey-label">
                                  <input type="radio" class="regular-radio" id="s1_3" name="a" >
                                  <label class="" for="s1_3">
                                      
                                  </label>
                                  <span class="regular-icon-txt">4000-5000</span>
                              </label>
                          </div>
                        </div>
                          
                    </div>

                    <div class="survey-item" >
                    <!-- 哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈 -->
                      <div class="wrap" data-rule="radio" data-name="aa" data-radio-msg="至少要选一个啊" >
                        <div class="survey-header" >
                            <span class="survey-index">2、</span>
                            <span class="survey-title">在容器上写明规则 data-rule="radio" data-name="对应radio或者checkbox的name" data-radio-msg="错误提示信息"</span>
                        </div>
                        <div class="survey-content">
                            <label for="s2_1" class="survey-label">
                                <input type="checkbox" class="regular-checkbox" id="s2_1" name="aa" >
                                <label class="checkbox-icon" for="s2_1">
                                    <i class="if icon-check" style="color:#fff"></i>
                                </label>
                                <span class="regular-icon-txt">2000-3000</span>
                            </label>
                            <label for="s2_2" class="survey-label">
                                <input type="checkbox" class="regular-checkbox" id="s2_2" name="aa" >
                                <label class="checkbox-icon" for="s2_2">
                                    <i class="if icon-check" style="color:#fff"></i>
                                </label>
                                <span class="regular-icon-txt">2000-3000</span>
                            </label>
                            <label for="s2_3" class="survey-label">
                                <input type="checkbox" class="regular-checkbox" id="s2_3" name="aa" >
                                <label class="checkbox-icon" for="s2_3">
                                    <i class="if icon-check" style="color:#fff"></i>
                                </label>
                                <span class="regular-icon-txt">2000-3000</span>
                            </label>
                        </div>
                      </div>
                        
                    </div>

                    


                </div>
                
                <div class="survey-action">
                    <button type="submit" class="qui-btn btnB fluid" id="u-submit-button">下一步</button>
                </div>

            </form>
          
            
            
        </div>
      
    <script src="../assets/js/plugins/dm.ajaxpost.js"></script>
    <script src="../assets/js/plugins/dm.validate2.js"></script>
    <script>

    /*$(function () {
      $('form').not('[novalidate]').validate('init');
    });*/

    $(function(){
      //$('form').not('[novalidate]').validate('init');

      

      // 同步
      $(document).off('submit.native').on('submit.native', '#nativeForm', function (e, eventData) {
          e.preventDefault()
          var $form = $(this)

          $form.validate(null, function(){
              // 没有错误则同步提交
              $form[0].submit();
          });
          
      });

      

      // 异步
      $(document).off('submit.ajax').on('submit.ajax', '#ajaxForm', function (e, eventData) {
          e.preventDefault()
          var $form = $(this),
              $btn = $form.find(':submit');

          var ajaxSubmit = function () {
              $btn.disable();
              var method = $form.data('ajaxMethod');
              if (!method) method = 'post';
             
              dm.ajax(method, $form.attr('action'), $form.serialize()).done(function (res) {
                  console.log('提交成功');

              }).fail(function () {
                  //$form.triggerHandler('fail')
              }).always(function () {
                  $btn.enable();
                  //$form.triggerHandler('always')
              })
          }
          $form.validate(null, ajaxSubmit);
      });

      // 问卷调差 radio checkbox
      $(document).off('submit.native').on('submit.native', '#sForm', function (e, eventData) {
          e.preventDefault()
          var $form = $(this)

          console.log('问卷调差')
          $form.validate(null, function(){
              console.log('ok')
          });
          
      });


      /*$('form').on('success.next', function (e, res) {
         console.log('success.next')
      });*/

    });
    </script>
    


    
  </body>
</html>
