<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="short_msg">
	<resultMap class="com.longan.biz.dataobject.ShortMsg" id="shortMsgResult">
		<result column="id" jdbcType="BIGINT" property="id" />
		<result column="gmt_create" jdbcType="DATETIME" property="gmtCreate" />
		<result column="gmt_modify" jdbcType="DATETIME" property="gmtModify" />
		<result column="mobile" jdbcType="VARCHAR" property="mobile" />
		<result column="content" jdbcType="VARCHAR" property="content" />
		<result column="type" jdbcType="INTEGER" property="type" />
		<result column="status" jdbcType="INTEGER" property="status" />
	</resultMap>

	<sql id="shortMsgFullColumns">
		id, gmt_create, gmt_modify, mobile, content,
		type, status
	</sql>

	<insert id="insert" parameterClass="com.longan.biz.dataobject.ShortMsg">
		insert into short_msg (
		<include refid="short_msg.shortMsgFullColumns" />
		) values (#id:BIGINT#, now(), now(), #mobile:VARCHAR#,
		#content:VARCHAR#, #type:INTEGER#, #status:INTEGER#)
		<selectKey resultClass="Long" keyProperty="id">
			SELECT
			LAST_INSERT_ID()
		</selectKey>
	</insert>

	<update id="updateByPrimaryKey" parameterClass="com.longan.biz.dataobject.ShortMsg">
		update short_msg
		set gmt_modify = now()
		<dynamic>
			<isNotNull prepend="," property="status">
				status = #status:INTEGER#
			</isNotNull>
		</dynamic>
		where id = #id:BIGINT#
	</update>
</sqlMap>	