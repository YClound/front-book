<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    #parse("common/common.vm")
    #parse("common/select.vm")
    #parse("common/errorUtils.vm")
    #parse("common/checkbox.vm")
    <link rel="stylesheet" type="text/css" href="$!staticServer/css/base.css" />
    <link rel="stylesheet" type="text/css" href="$!staticServer/css/list-common.css" />
    <link rel="stylesheet" type="text/css" href="$!staticServer/css/doubleDate.css" />
    <script type="text/javascript" src="$!staticServer/js/jquery-1.7.2.js"></script>
    <script type="text/javascript" src="$!staticServer/js/jquery-ui-1.8.22.custom.min.js"></script>
    <link rel="stylesheet" type="text/css" href="$!staticServer/css/ui-lightness/jquery-ui-1.8.22.custom.css" />
    <script type="text/javascript" src="$!staticServer/js/tip.js"></script>
    <script type="text/javascript" src="$!staticServer/js/doubleDate2.0.js"></script>
    
</head>
<body class="list-body">
    $!errorMsg
     <div class="list-container">
        <div class="alert-title fz-16">修改供货商品</div>
        <form id="form" class="queryForm" action="gameItemSupplyEdit.do" method="post"  >
            <input type="hidden" name="bizId" value="$!itemSupply.bizId" />
            <input type="hidden" name="itemId" value="$!itemSupply.itemId" />
            <input type="hidden" name="id" value="$!itemSupply.id" />
            <table class="table query-style table-striped table-bordered table-condensed list">
                <thead>
                    <tr>
                        <td colspan="6">供货商品信息</td>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="w-8em">商品名称</td>
                        <td class="detail">
                           $!item.itemName
                        </td>
                        <td class="w-8em">面额</td>
                        <td class="detail">
                             $!item.getPriceDesc($!item.itemFacePrice) 元
                        </td>
                        <td class="w-8em">商品类型 </td>
                        <td class="detail">
                           $!item.itemTypeDesc
                        </td>   
                    </tr>  
  
                    <tr>
                        <td class="w-8em">供货优先级</td>
                        <td class="detail">
                            <input id="priority" type="text" name="priority"  size="20" value="$!itemSupply.priority">
                                #getErrorMessage($errorList,"priority")
                        </td>
                        <td class="w-8em">成本价</td>
                        <td class="detail">
                            <input  type="text" name="itemCostPrice"  size="20" value="$!item.getPriceDesc($!itemSupply.itemCostPrice)">
                            #getErrorMessage($errorList,"itemCostPrice")
                        </td>
                         <td class="w-8em">上游商品编号</td>
                        <td class="detail"><input id="itemCostPrice" type="text" name="supplyProductCode"  size="20" value="$!itemSupply.supplyProductCode">
                            #getErrorMessage($errorList,"supplyProductCode")
                        </td>
                    </tr>
                    
                    <tr>
                        <td class="w-8em">附加信息1</td>
                        <td class="detail"><input id="itemSupplyExt1" type="text" name="itemSupplyExt1"  size="20" value="$!itemSupply.itemSupplyExt1">
                            #getErrorMessage($errorList,"itemSupplyExt1")
                        </td>
                        <td class="w-8em">附加信息2</td>
                        <td class="detail"><input id="itemSupplyExt1" type="text" name="itemSupplyExt2"  size="20" value="$!itemSupply.itemSupplyExt2">
                            #getErrorMessage($errorList,"itemSupplyExt2")
                        </td>
                        <td class="w-8em">附加信息3</td>
                        <td class="detail"><input id="itemSupplyExt1" type="text" name="itemSupplyExt3"  size="20" value="$!itemSupply.itemSupplyExt3">
                            #getErrorMessage($errorList,"itemSupplyExt3")
                        </td>
                    </tr>

                    <tr>
                        <td class="w-8em" valign="top">供货商</td>
                        <td class="detail" valign="top">
                            #selectClassBig($!supplyTraderList,"supplyTraderId",$!itemSupply.supplyTraderId)
                                #getErrorMessage($errorList,"supplyTraderId")
                                <div id="traderInfo" style="display:none">
                                    
                                </div>                      
                        </td>   
                        <td class="w-8em" valign="top">损失类型</td>
                        <td class="detail" valign="top">
                            #select($!lossTypeList,'lossType',$!itemSupply.lossType)
                            #getErrorMessage($errorList,"lossType")
                            <div id="lossTime" style="display:none">
                            <br/>
                            <input type="text" name="lossTime" value="$!itemSupply.lossTime" />笔后止损
                            #getErrorMessage($errorList,"lossTime")
                            </div>
                        </td>
                       
                    </tr>
                </tbody>
                <tfoot>
                    <tr>
                        <td colspan="6">
                            <input class="btn btn-inverse" id="find" type="submit" value="修改" />
                            <input class="btn btn-inverse" type="button" onclick="javascript: history.go(-1)" value="取消" /></td>
                    </tr>
                </tfoot>        
            </table>
        </form>
    </div>
    <script>
    jQuery(document).ready(function(){
        var traderInfo =  {#foreach($!row in $!traderInfoList)$!row.userId:"<br />供货方式 ：  <font color=\"green\" >$!row.supplyTypeDesc</font> <br />接口方式 ： <font color=\"green\" >$!row.supplyWayDesc</font>"#if($velocityCount != $!traderInfoList.size()),#end#end};
        
         if(jQuery('#supplyTraderId').val()){
            jQuery("#traderInfo").show();
            jQuery("#traderInfo").html("");
            if(traderInfo[jQuery('#supplyTraderId').val()]){
              jQuery("#traderInfo").append(traderInfo[jQuery('#supplyTraderId').val()]);
            }else{
                 jQuery("#traderInfo").append("<font color=\"red\" ><br />供货商未配置供货信息，请联系系统管理员 </font>");
            }        
         }
         
         jQuery('#supplyTraderId').bind('change',function(){
              if(jQuery('#supplyTraderId').val()){
                jQuery("#traderInfo").show();
                jQuery("#traderInfo").html("");
                if(traderInfo[jQuery('#supplyTraderId').val()]){
                  jQuery("#traderInfo").append(traderInfo[jQuery('#supplyTraderId').val()]);
                }else{
                     jQuery("#traderInfo").append("<font color=\"red\" ><br />供货商未配置供货信息，请联系系统管理员 </font>");
                }
              }else{
                jQuery("#traderInfo").hide();
                jQuery("#traderInfo").html("");
              }
         });
     }
    );

    window.onload=function(){
         var lossType = document.getElementById("lossType");
         var lossTime = document.getElementById("lossTime");
         if(lossType.value==1){
            lossTime.style.display="block";
         }else{
            lossTime.style.display="none";
         }
         lossType.onchange = function(){
            if(lossType.value==1){
                lossTime.style.display="block";
            }else{
                lossTime.style.display="none";
            }
         }
    }
    </script>
</body>
</html>
