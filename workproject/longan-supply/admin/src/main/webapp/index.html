<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
#parse("common/common.vm")
<title>流量包子</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="$!staticServer/css/login.css" rel="stylesheet"
    type="text/css" />
<script type="text/javascript"
    src="$!staticServer/js/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="$!staticServer/js/md5.js"></script>
<script type="text/javascript" src="$!staticServer/js/jquery.placeholder.js"></script>
<link rel="stylesheet" type="text/css"
    href="$!staticServer/css/bootstrap.min.css" />
<link href="$!staticServer/css/bootstrap-responsive.min.css" rel="stylesheet">

<style>
.well {
    min-height: 20px;
    padding: 19px;
    margin-bottom: 20px;
    background-color: #fff;
    border: 1px solid #eee;
    border: 1px solid rgba(0, 0, 0, 0.05);
    -webkit-border-radius: 4px;
    -moz-border-radius: 4px;
    border-radius: 4px;
    -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.05);
    -moz-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.05);
    box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.05);
}


.container-fluid
div.center,p.center,img.center {
    margin-left: auto !important;
    margin-right: auto !important;
    float: none !important;
    display: block;
    text-align: center;
    
}
html{height: 100%;}
body{
    height: 100%;
    background: #586683;
    background-image: url("img/index-bg.jpg");
    background-position: center bottom;
    background-repeat: no-repeat;
    overflow: hidden;
}
.container-fluid{
    margin-top:10%;
}

.alert{
    font-size: 16px;
    color: #2d97f0;
    border: 0px;
    background-color: transparent;
    text-align: center;
    padding: 0px;
}

.sidebar-nav {
    padding: 9px 0;
}

.login-header {
    padding-top: 45px;
    height: 120px;
    color: white;
}

.login-box {
    margin-left: auto !important;
    margin-right: auto !important;
    float: none !important;
    display: block;
}

.login-box input{
    width: 94%;
    padding: .4em .8em;
    height: 30px;
}
.login-box input[name="checkCode"]{width: 60%; float: left;}
.login-box .input-prepend{width: 100%;}


.login-box .btn {
    margin-top: 15px;
    width: 100%;
    height: 44px;
    font-size: 18px;
    border: 0px;
}
.login-box .btn:hover{background-position: 0px;}
.login-box .btn-info{background-color: #2d97f0; height: 44px;}
.login-box .btn-info:hover{background-color: #298bde;}

.login-verify {
    float: right;
    width: 30%;
    height: 42px;
}


.footer{
    padding-top: 30px;
    color:  #9C9C9C;
}
.row-fluid .span6 {
    width: 100%;
}
</style>
</head>
<body>
    <div></div>

    <div class="container-fluid">
        $!errorMsg
        <div class="row-fluid">

            <div class="row-fluid">
                <div class="well span4 login-box">
                    <div class="alert center">流量包子后台系统管理</div>
                    <form class="form-horizontal" action="login.do" method="post"
                        onsubmit="return preForm();">
                        <input id="encodePwd" type="hidden" name="pwd" />
                        <fieldset>
                            <div class="control-group center" title="用户名" data-rel="tooltip">
                                <div class="input-prepend" title="用户名" data-rel="tooltip">
                                    <input
                                        autofocus class="input-large" name="name" id="userName"
                                        type="text" value="$!{loginForm.name}" placeholder="用户名" />
                                </div>

                            </div>

                            <div class="clearfix"></div>

                            <div class="control-group center" title="密码" data-rel="tooltip">
                                <div class="input-prepend" title="密码" data-rel="tooltip">
                                   <input
                                        class="input-large" id="pwd" class="password" value=""
                                        type="password" placeholder="密码" />
                                </div>
                            </div>

                            <div class="clearfix"></div>

                            <div class="control-group center" title="验证码" data-rel="tooltip">
                                <div class="input-prepend" title="验证码" data-rel="tooltip">
                                    <input
                                        type="text" id="checkCode" name="checkCode"
                                        class="input-medium" maxlength="4" placeholder="验证码" />
                                    <span> <img id="imgCheckCode"
                                    class="login-verify img-rounded"></span>
                                </div>
                                
                            </div>

                            <div class="clearfix"></div>

                            <p class="center span6">
                                <button type="submit" class="btn btn-info" style="width:100%;">登录</button>
                            </p>
                        </fieldset>
                    </form>
                </div>
                <!--/span-->
            </div>
            <!--/row-->
        </div>
        <!--/fluid-row-->

    </div>
    <script type="text/javascript">
        $().ready(function() {
            getCheckCode();
            jQuery('#imgCheckCode').on("click", getCheckCode);
            
            if (!('placeholder' in document.createElement('input'))) {
                $('input[placeholder],textarea[placeholder]').each(function() {
                    var that = $(this), text = that.attr('placeholder');
                    if (that.val() === "") {
                        that.val(text).addClass('placeholder');
                    }
                    that.focus(function() {
                        if (that.val() === text) {
                            that.val("").removeClass('placeholder');
                        }
                    }).blur(function() {
                        if (that.val() === "") {
                            that.val(text).addClass('placeholder');
                        }
                    }).closest('form').submit(function() {
                        if (that.val() === text) {
                            that.val('');
                        }
                    });
                });
            }
            
        });
        
        function preForm() {
            var name = jQuery('#userName').val();
            if (!name) {
                alert("用户名不能为空");
                return false;
            }

            var checkCode = jQuery('#checkCode').val();
            if (!checkCode) {
                alert("验证码不能为空");
                return false;
            }
            var pwd = jQuery('#pwd').val();
            if (!pwd) {
                alert("密码不能为空");
                return false;
            }

            pwd = CryptoJS.MD5(pwd + "longan_login");
            jQuery('#encodePwd').val(pwd);
            return true;
        }

        function getCheckCode() {
            var loginId = jQuery('#loginId').val();
            var imgUrl = "admin/checkCode.do?&ts=" + new Date().getTime();
            jQuery('#imgCheckCode').attr("src", imgUrl);
        }

        
    </script>
</body>
</html>