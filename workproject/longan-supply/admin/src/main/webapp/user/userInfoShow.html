<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>个人信息查询</title>
    #parse("common/common.vm")  
    <link rel="stylesheet" type="text/css" href="$!staticServer/css/base.css" />
    <link rel="stylesheet" type="text/css" href="$!staticServer/css/list-common.css" />
    <script type="text/javascript" src="$!staticServer/js/jquery-1.7.2.js"></script>
    <script type="text/javascript" src="$!staticServer/js/jquery-ui-1.8.22.custom.min.js"></script>
    <link rel="stylesheet" type="text/css" href="$!staticServer/css/ui-lightness/jquery-ui-1.8.22.custom.css" />
    <script type="text/javascript" src="$!staticServer/js/tip.js"></script>
    
</head>
<body class="list-body">
    <div class="list-container">
        <div class="alert-title fz-16">个人信息查询</div>

        <table class="table information-show table-striped table-bordered table-condensed list" style="table-layout: fixed">
            <thead>
                <tr>
                    <td colspan="6"><b>用户基本信息</b></td>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>用户编号</td>
                    <td>$!userInfo.id</td>
                    <td width="100">用户名</td>
                    <td width="350">
                        $!userInfo.userName
                    </td>
                    <td width="100">登录名</td>
                    <td width="">
                       $!userInfo.loginId
                    </td>
                </tr>
                <tr>
                    <td width="100">公司信息</td>
                    <td width="350">
                        $!userInfo.compayInfo
                    </td>
                    <td width="100">绑定手机号</td>
                    <td width="">
                       $!userInfo.mobile
                    </td>
                    <td width="100">注册时间</td>
                    <td width="350">
                        $!dateTool.format("yyyy-MM-dd HH:mm:ss", $!userInfo.gmtCreate)
                    </td>
                </tr>   
                <tr>                   
                    <td width="100">邮箱</td>
                    <td width="">
                       $!userInfo.email
                    </td>
                    <td width="100">最后登录时间</td>
                    <td width="350">
                        $!dateTool.format("yyyy-MM-dd HH:mm:ss", $!userInfo.lastLoginTime)
                    </td>
                    <td width="100">最后登录ip</td>
                    <td width="">
                       $!userInfo.lastLoginIp
                    </td>
                </tr>                  
                <tr>
                    <td width="100">用户类型</td>
                    <td width="350">
                        $!userInfo.typeDesc
                    </td>
                    <td width="100">用户状态</td>
                    <td width="">
                       $!userInfo.statusDesc
                    </td>
                    <td colspan="2"></td>
                </tr>
                #if($!userInfo.canUserTrade())
                <tr>
                    <td colspan="6"><b>账户信息</b></td>
                </tr>
                <tr>
                    <td width="100">账户编号</td>
                    <td width="350">
                        $!acctInfo.id
                    </td>
                    <td width="100">余额</td>
                    <td width="">
                      <font color='red' >  $!acctInfo.balanceDesc </font> 元
                    </td>
                    <td width="100">账户状态</td>
                    <td width="">
                       $!acctInfo.statusDesc
                    </td>
                </tr>
                <tr>
                    #if($!user.canUserTrade())
                        <td width="100">账户状态</td>
                        <td width="">
                           $!acctInfo.statusDesc
                        </td>
                        <td colspan="2"/>
                    #else   
                    <td width="100">销售价格</td>
                    <td width="350">
                        $!acctInfo.salePriceDesc
                    </td>
                    
                    #end
                </tr>
                <tr>
                    <td width="100">业务权限</td>
                    <td width="1100px" nowrap="true" colspan="5" style="word-wrap: break-word;">
                        #foreach($key in ${bizList.keySet()})  
                        业务名称 :   ${bizList.get($key)}  ( 业务编号：$key  )
                        #end    
                    </td>
                </tr>
                <tr style="border-bottom: #f1f1f1 1px dashed;margin-bottom: 10px">
                    <td width="100" align="left">
                        <a id="showPrivateKey" class="btn btn-mini btn-primary add" >查看密钥</a>
                    </td>
                    <td id="keyContent" width="" colspan="5"></td>
                </tr>               
                #end
            </tbody>
            <tfoot>
                <tr>
                    <td colspan="6" align="left">
                        <input class="btn btn-mini btn-inverse" type="button" onclick="javascript:history.go(-1)" value="返回" /></td>
                </tr>
            </tfoot>    
        </table>

    </div>
    
    <script type="text/javascript">
        $(document).ready(function(){
            $("#showPrivateKey").click(function(){
             htmlobj=$.ajax({url:"../api/showPrivateKey.do?id=$!userInfo.id",async:false});
             var response = JSON.parse(htmlobj.responseText);
             if(response.status != "success"){
                $("#keyContent").html("<font color='red'>" + response.errorMsg + "</font>");
             }else{
                $("#keyContent").html(response.module.privateKey);
             }
            
         });
    });

</script>
</body>
</html>
