<!doctype html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3" >
  <head>
    <meta charset="utf-8"></meta>
    <title>后台管理系统</title>
    <link rel="stylesheet" href="../vendor/font-awesome/4.2.0/css/font-awesome.min.css"></link>
    <link rel="stylesheet" href="../assets/css/base_m.css"></link>
    <link rel="stylesheet" href="../assets/css/admin.css"></link>

    <style>
    *:focus { outline: none; }
    body {
      font-family: '微软雅黑';
      box-sizing: border-box;
      background: #000 url(../assets/images/admin/login-bg.jpg) no-repeat 0px 0px;
      background-size: cover;
      height: 100%;
      overflow: hidden;

    }
    .login-container {
      
    }
    .login-header {
      background-color: rgba(0,0,0,0.2);
      padding: 10px 20px;
      color: #fff;
    }
    .admin-login {
      width: 320px;
      margin: 0px auto;
      position: relative;
      padding-top: 100px;

    }
    .login-form-bg {
      
    }
    .login-form-wrapper {
      background-color: rgba(255,255,255,0.4);
      border-radius: 12px;
      text-align: center;
      overflow: hidden;
      padding: 20px;
    }
    .login-form-headline {
      padding: 20px 0;
      font-size: 18px;
    }
    .login-form-headline  u{
      color: #deab00;
      font-size: 24px;
    }
    .login-form-headline  small{
      color: #bac4c9;
      font-size: 14px;
    }
    
    .login-container .form-control2.form-control-user:-webkit-autofill{
      box-shadow: 0 0 0px 1000px #ecf5fa inset !important;
      -webkit-box-shadow: 0 0 0px 1000px #ecf5fa inset !important;

    }
    
    
    .form-action ,.form-action a{
      color:#1f79ae;
      font-size: 12px;
    }
    </style>
    
  </head>
  <body class="login-container" ng-app="awLoginApp" ng-controller="loginCtrl">
    
    <div class="admin-login">
      <div class="login-form-wrapper">
        <form class="form-horizontal" name="submitForm" th:action="@{/login}" method="post">
          <div class="login-form-headline">商会管理后台</div>
          <div class="form-group mb-12 bb m-8">
              <div class="user por">
                  <input type="text" class="form-control2 form-control-user line" ng-model="formData.username"  required="required" name="username" placeholder="用户名"></input>
              </div>
          </div>
          <div class="form-group mb-7 bb m-8">
              <div class="pwd por">
                  <input type="password" class="form-control2 form-control-pwd line" ng-model="formData.password"  required="required" name="password" placeholder="密码"></input>
              </div>
          </div>
          <div class="form-group" style="min-height:30px;color:red">
              <div class="col-md-4 col-md-offset-2">
              <div th:if="${session.SPRING_SECURITY_LAST_EXCEPTION}" >
                  <div th:text="${session.SPRING_SECURITY_LAST_EXCEPTION.message}"></div></div>
              </div>

          </div>
          <div class="form-group clearfix form-action m-8">
            <button class="btn btn-o w-100 p-5 fz-medium" type="button" ng-click="login()">登录</button>
          </div>
        </form>
      </div>
        
    </div>
  
  <script src="../vendor/jquery/jquery-2.1.4.min.js"></script>
  <script src="../vendor/angular/js/angular.min.js"></script>
  <script src="../assets/js/dm.api.js"></script>
  <script src="../assets/js/admin.js"></script>
  
  <script>
  
    var app = angular.module('awLoginApp', ['angular-core']);

    
    app.controller("loginCtrl", ["$scope","resource",function(scope,resource) {
      console.log(1)
      var loginDao = resource('/admin');
      scope.loading = false;
      scope.login = function(){
        scope.loading = true;
        loginDao.invoke('login',scope.formData).then(function(){
          location.href = 'index.html';
        },function(result){
          alert('error')
        });
      }

    }])
    
  

  </script>
  </body>
</html>
